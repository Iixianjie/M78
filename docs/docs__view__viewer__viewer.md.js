(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[228,227],{"5fsK":function(e,t,n){},Al6Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n("kqV7");var a=n("k1fw"),r=n("tJVT"),l=n("q1tI"),i=n.n(l),c=n("wEEd"),o=n("y4v0"),s=n("9nhX"),u=n.n(s),d=n("zdPv"),m=n("TSYQ"),f=n.n(m);function b(e,t){var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r=-(a.top-n.top),l=-(a.bottom-n.bottom),i=-(a.left-n.left),c=-(a.right-n.right);return{left:i,right:c,top:r,bottom:l}}var p=[.5,3],g={scale:1,rotateZ:0,x:0,y:0},v=i.a.forwardRef((e,t)=>{var n=e.children,s=e.disabled,m=void 0!==s&&s,v=e.bound,h=e.drag,w=void 0===h||h,R=e.pinch,x=void 0===R||R,E=e.wheel,j=void 0===E||E,y=e.className,S=e.style,k=Object(l["useRef"])(null),B=Object(l["useRef"])(null),O=Object(c["useSpring"])(()=>g),C=Object(r["a"])(O,2),V=C[0],Z=C[1],D=Object(d["useSelf"])(Object(a["a"])(Object(a["a"])({},g),{},{drag:!0,pinch:!0,wheel:!0,pinchTimer:null})),N=p[0],T=p[1],q=Object(d["useSetState"])({bound:void 0}),K=Object(r["a"])(q,2),P=K[0],A=K[1];Object(l["useImperativeHandle"])(t,()=>({setRotate:F,setScale:z,reset:Q,instance:D}));var I=Object(o["b"])({onDrag(e){var t=e.event,n=Object(r["a"])(e.movement,2),a=n[0],l=n[1],i=e.first;null===t||void 0===t||t.preventDefault(),D.drag&&(i&&_(),D.x=a,D.y=l,Z({x:D.x,y:D.y,config:c["config"].default}))},onPinchStart:J,onPinchEnd(){clearTimeout(D.pinchTimer),D.pinchTimer=setTimeout(()=>{W()},100)},onPinch(e){var t=Object(r["a"])(e.direction,1),n=t[0],a=Object(r["a"])(e.delta,2),l=a[1];D.scale=M(n,.03),D.rotateZ+=l,Z({rotateZ:D.rotateZ,scale:D.scale,config:{mass:1,tension:150,friction:17}})},onWheelStart:J,onWheelEnd:W,onWheel(e){var t=e.event,n=Object(r["a"])(e.direction,2),a=n[1];null===t||void 0===t||t.preventDefault(),D.scale=M(a,.16),Z({scale:D.scale,config:c["config"].stiff})}},{domTarget:B,enabled:!m,drag:{enabled:w,bounds:P.bound,rubberband:!0,initial:()=>[D.x,D.y]},pinch:{enabled:x},wheel:{enabled:j},eventOptions:{passive:!1}});function M(e,t){var n=e>0?+t:-t,a=Math.round(100*(D.scale+n))/100;return a=u()(a,N,T),a}function J(){D.drag=!1}function W(){D.drag=!0}function z(e){m||(D.scale=u()(e,N,T),Z({scale:D.scale}))}function F(e){m||Z({rotateZ:D.rotateZ+=e,config:c["config"].slow})}function Q(){m||Z({scale:D.scale=g.scale,rotateZ:D.rotateZ=g.rotateZ,x:D.x=g.x,y:D.y=g.y})}function _(){var e;if(v&&k.current&&(e="getBoundingClientRect"in v?v:v.current,e)){var t=b(e,k.current);t!==P.bound&&A({bound:t})}}return Object(l["useEffect"])(I,[I]),i.a.createElement("div",{ref:k,className:f()("m78-viewer",y),style:S},i.a.createElement(c["animated"].div,{ref:B,className:"m78-viewer_cont",style:{transform:Object(c["to"])([V.x,V.y,V.scale,V.rotateZ],(e,t,n,a)=>"translate3d(".concat(e,"px, ").concat(t,"px, 0px) scale(").concat(n,") rotateZ(").concat(a,"deg)"))}},n))}),h=v},"K+nK":function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n},"R+vx":function(e,t,n){"use strict";n.r(t);var a=n("tJVT"),r=n("q1tI"),l=n.n(r),i=n("Al6Z"),c=(n("kqV7"),n("ZMQu"),n("uVtn")),o=(n("QjBK"),n("K3qG")),s=n("SWf/"),u=n.n(s),d={width:"240px",height:"240px",fontSize:"32px",textAlign:"center"},m=()=>{var e=l.a.useState(!1),t=Object(a["a"])(e,2),n=t[0],r=t[1],s=l.a.useRef(null),m=l.a.useRef(null);return l.a.createElement("div",null,l.a.createElement("div",{ref:m,className:"tc p-32",style:{width:"100%",height:"100%",border:"1px solid #ccc",margin:"10vh auto"}},l.a.createElement(i["a"],{ref:s,bound:m,disabled:n},l.a.createElement("div",{style:d},l.a.createElement("img",{style:{width:"100%",height:"100%",objectFit:"cover"},draggable:!1,src:u.a,alt:""}))),l.a.createElement("div",null,l.a.createElement(c["a"],{onClick:()=>s.current.setScale(Object(o["l"])(0,3))},"setScale()"),l.a.createElement(c["a"],{onClick:()=>s.current.setRotate(Object(o["l"])(-360,360))},"setRotate()"),l.a.createElement(c["a"],{onClick:()=>s.current.reset()},"reset()"),l.a.createElement(c["a"],{onClick:()=>r(e=>!e)},"disabled ",n.toString()))))};t["default"]=m},"SWf/":function(e,t,n){e.exports=n.p+"static/333.ede8e69c.jpg"},ZMQu:function(e,t,n){"use strict";n("iCBh"),n("vbCR")},kqV7:function(e,t,n){"use strict";n("iCBh"),n("5fsK")},tejL:function(e,t,n){"use strict";n.r(t);var a=n("0Owb"),r=n("q1tI"),l=n.n(r),i=(n("B2uJ"),n("+su7"),n("qOys")),c=n.n(i),o=n("5Yjd"),s=n.n(o),u=l.a.memo((function(){var e=n("K+nK"),t=e(n("q1tI")),a=e(n("R+vx")),r=function(){return t["default"].createElement(a["default"],null)};return t["default"].createElement(r)}));t["default"]=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"viewer-\u67e5\u770b\u5668"},l.a.createElement("a",{"aria-hidden":"true",href:"#viewer-\u67e5\u770b\u5668"},l.a.createElement("span",{className:"icon icon-link"})),"Viewer \u67e5\u770b\u5668"),l.a.createElement("p",null,"\u521b\u5efa\u4e00\u4e2a\u53ef\u64cd\u4f5c\u7684\u5c55\u793a\u533a\u57df\uff0c\u652f\u6301\u901a\u8fc7 drag \u62d6\u52a8\u3001\u624b\u52bf\u65cb\u8f6c\u3001\u624b\u52bf\u6216\u9f20\u6807\u6eda\u8f6e\u7f29\u653e\u5b50\u5143\u7d20"),l.a.createElement("h2",{id:"\u793a\u4f8b"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u793a\u4f8b"},l.a.createElement("span",{className:"icon icon-link"})),"\u793a\u4f8b"),l.a.createElement("p",null,"\ud83d\ude0a \u8bf7\u5728\u79fb\u52a8\u7aef\u4f53\u9a8c\u6b64\u793a\u4f8b\u7684\u5b8c\u6574",l.a.createElement("code",null,"(\u624b\u52bf\u652f\u6301)"),"\u6548\u679c")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport Viewer, { ViewerRef } from 'm78/viewer';\nimport 'm78/viewer/style';\n\nimport 'm78/drawer/style';\n\nimport Button from 'm78/button';\nimport 'm78/button/style';\n\nimport { getRandRange } from '@lxjx/utils';\nimport img1 from '@/mock/img/333.jpg';\n\nconst boxStyle: React.CSSProperties = {\n  width: '240px',\n  height: '240px',\n  fontSize: '32px',\n  textAlign: 'center',\n};\n\nconst Demo = () => {\n  const [disable, setDisable] = React.useState(false);\n  const ref = React.useRef<ViewerRef>(null!);\n  const wrap = React.useRef<HTMLDivElement>(null!);\n  return (\n    <div>\n      <div\n        ref={wrap}\n        className=\"tc p-32\"\n        style={{ width: '100%', height: '100%', border: '1px solid #ccc', margin: '10vh auto' }}\n      >\n        <Viewer ref={ref} bound={wrap} disabled={disable}>\n          <div style={boxStyle}>\n            <img\n              style={{ width: '100%', height: '100%', objectFit: 'cover' }}\n              draggable={false}\n              src={img1}\n              alt=\"\"\n            />\n          </div>\n        </Viewer>\n\n        <div>\n          <Button onClick={() => ref.current.setScale(getRandRange(0, 3))}>setScale()</Button>\n          <Button onClick={() => ref.current.setRotate(getRandRange(-360, 360))}>\n            setRotate()\n          </Button>\n          <Button onClick={() => ref.current.reset()}>reset()</Button>\n          <Button onClick={() => setDisable(prev => !prev)}>disabled {disable.toString()}</Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Demo;\n",jsx:"import React from 'react';\nimport Viewer from 'm78/viewer';\nimport 'm78/viewer/style';\nimport 'm78/drawer/style';\nimport Button from 'm78/button';\nimport 'm78/button/style';\nimport { getRandRange } from '@lxjx/utils';\nimport img1 from '@/mock/img/333.jpg';\n\nconst boxStyle = {\n  width: '240px',\n  height: '240px',\n  fontSize: '32px',\n  textAlign: 'center',\n};\n\nconst Demo = () => {\n  const [disable, setDisable] = React.useState(false);\n  const ref = React.useRef(null);\n  const wrap = React.useRef(null);\n  return (\n    <div>\n      <div\n        ref={wrap}\n        className=\"tc p-32\"\n        style={{\n          width: '100%',\n          height: '100%',\n          border: '1px solid #ccc',\n          margin: '10vh auto',\n        }}\n      >\n        <Viewer ref={ref} bound={wrap} disabled={disable}>\n          <div style={boxStyle}>\n            <img\n              style={{\n                width: '100%',\n                height: '100%',\n                objectFit: 'cover',\n              }}\n              draggable={false}\n              src={img1}\n              alt=\"\"\n            />\n          </div>\n        </Viewer>\n\n        <div>\n          <Button onClick={() => ref.current.setScale(getRandRange(0, 3))}>setScale()</Button>\n          <Button onClick={() => ref.current.setRotate(getRandRange(-360, 360))}>\n            setRotate()\n          </Button>\n          <Button onClick={() => ref.current.reset()}>reset()</Button>\n          <Button onClick={() => setDisable(prev => !prev)}>disabled {disable.toString()}</Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Demo;\n"}},{path:"/_demos/demo-30",dependencies:{"@lxjx/utils":"1.12.1"},files:{}}),l.a.createElement(u,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h2",{id:"api"},l.a.createElement("a",{"aria-hidden":"true",href:"#api"},l.a.createElement("span",{className:"icon icon-link"})),"API"),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("code",null,"props"))),l.a.createElement(c.a,{code:"interface ViewerProps {\n  /** \u4efb\u4f55react\u53ef\u6e32\u67d3\u7684\u4e1c\u897f */\n  children: React.ReactNode;\n  /** false | \u7981\u7528\u4efb\u4f55\u624b\u52bf\u6216\u5b9e\u4f8b\u65b9\u6cd5 */\n  disabled?: boolean;\n  /** \u4f20\u5165\u4e00\u4e2adom\u5143\u7d20\u6216\u4e00\u4e2aref\u5bf9\u8c61\u7528\u4e8e\u9650\u5236\u53ef\u62d6\u52a8\u7684\u8303\u56f4, \u9ed8\u8ba4\u62d6\u52a8\u8303\u56f4\u4e3a\u5f53\u524d\u5143\u7d20\u5bbd\u9ad8\u503c * \u7f29\u653e\u6bd4 */\n  bound?: React.MutableRefObject<Element> | Element;\n  /** true | \u5355\u72ec\u5f00\u542f\u5173\u95ed\u67d0\u4e00\u7c7b\u4e8b\u4ef6 */\n  drag?: boolean;\n  pinch?: boolean;\n  wheel?: boolean;\n}\n",lang:"tsx"}),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("code",null,"ref"))),l.a.createElement(c.a,{code:"interface ViewerRef {\n  /** \u8bbe\u7f6e\u65cb\u8f6c\u89d2\u5ea6 */\n  setRotate(rotate: number): void;\n  /** \u8bbe\u7f6e\u7f29\u653e\u6bd4\u4f8b */\n  setScale(scale: number): void;\n  /** \u8fd8\u539f\u6240\u6709\u72b6\u6001 */\n  reset(): void;\n  /** \u5b9e\u4f8b\u5c5e\u6027 */\n  instance: {\n    /** \u53ea\u8bfb | \u5f53\u524d\u7f29\u653e\u6bd4 */\n    scale: number;\n    /** \u53ea\u8bfb | \u5f53\u524d\u65cb\u8f6c\u89d2\u5ea6 */\n    rotateZ: number;\n    /** \u53ea\u8bfb | x\u8f74\u504f\u79fb\u8ddd\u79bb */\n    x: number;\n    /** \u53ea\u8bfb | y\u8f74\u504f\u79fb\u8ddd\u79bb */\n    y: number;\n    /** \u62d6\u52a8\u662f\u5426\u53ef\u7528 */\n    drag: boolean;\n    /** \u634f\u3001\u53cc\u6307\u5c55\u5f00\u662f\u5426\u53ef\u7528 */\n    pinch: boolean;\n    /** \u9f20\u6807\u6eda\u52a8\u662f\u5426\u53ef\u7528 */\n    wheel: boolean;\n  };\n}\n",lang:"tsx"})))}},vbCR:function(e,t,n){}}]);