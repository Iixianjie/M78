(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[229,228],{"5fsK":function(e,t,n){},Al6Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("kqV7");var r=n("k1fw"),a=n("tJVT"),i=n("q1tI"),l=n.n(i),c=n("wEEd"),o=n("y4v0"),s=n("9nhX"),u=n.n(s),d=n("zdPv"),m=n("iuhU");function f(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=-(r.top-n.top),i=-(r.bottom-n.bottom),l=-(r.left-n.left),c=-(r.right-n.right);return{left:l,right:c,top:a,bottom:i}}var b=[.5,3],p={scale:1,rotateZ:0,x:0,y:0},g=l.a.forwardRef((e,t)=>{var n=e.children,s=e.disabled,g=void 0!==s&&s,v=e.bound,h=e.drag,w=void 0===h||h,R=e.pinch,x=void 0===R||R,E=e.wheel,j=void 0===E||E,y=e.className,S=e.style,O=Object(i["useRef"])(null),k=Object(i["useRef"])(null),B=Object(c["useSpring"])(()=>p),C=Object(a["a"])(B,2),V=C[0],Z=C[1],D=Object(d["useSelf"])(Object(r["a"])(Object(r["a"])({},p),{},{drag:!0,pinch:!0,wheel:!0,pinchTimer:null})),N=b[0],q=b[1],T=Object(d["useSetState"])({bound:void 0}),K=Object(a["a"])(T,2),P=K[0],A=K[1];Object(i["useImperativeHandle"])(t,()=>({setRotate:F,setScale:z,reset:_,instance:D}));var I=Object(o["b"])({onDrag(e){var t=e.event,n=Object(a["a"])(e.movement,2),r=n[0],i=n[1],l=e.first;null===t||void 0===t||t.preventDefault(),D.drag&&(l&&Q(),D.x=r,D.y=i,Z({x:D.x,y:D.y,config:c["config"].default}))},onPinchStart:J,onPinchEnd(){clearTimeout(D.pinchTimer),D.pinchTimer=setTimeout(()=>{W()},100)},onPinch(e){var t=Object(a["a"])(e.direction,1),n=t[0],r=Object(a["a"])(e.delta,2),i=r[1];D.scale=M(n,.03),D.rotateZ+=i,Z({rotateZ:D.rotateZ,scale:D.scale,config:{mass:1,tension:150,friction:17}})},onWheelStart:J,onWheelEnd:W,onWheel(e){var t=e.event,n=Object(a["a"])(e.direction,2),r=n[1];null===t||void 0===t||t.preventDefault(),D.scale=M(r,.16),Z({scale:D.scale,config:c["config"].stiff})}},{domTarget:k,enabled:!g,drag:{enabled:w,bounds:P.bound,rubberband:!0,initial:()=>[D.x,D.y]},pinch:{enabled:x},wheel:{enabled:j},eventOptions:{passive:!1}});function M(e,t){var n=e>0?+t:-t,r=Math.round(100*(D.scale+n))/100;return r=u()(r,N,q),r}function J(){D.drag=!1}function W(){D.drag=!0}function z(e){g||(D.scale=u()(e,N,q),Z({scale:D.scale}))}function F(e){g||Z({rotateZ:D.rotateZ+=e,config:c["config"].slow})}function _(){g||Z({scale:D.scale=p.scale,rotateZ:D.rotateZ=p.rotateZ,x:D.x=p.x,y:D.y=p.y})}function Q(){var e;if(v&&O.current&&(e="getBoundingClientRect"in v?v:v.current,e)){var t=f(e,O.current);t!==P.bound&&A({bound:t})}}return Object(i["useEffect"])(I,[I]),l.a.createElement("div",{ref:O,className:Object(m["a"])("m78-viewer",y),style:S},l.a.createElement(c["animated"].div,{ref:k,className:"m78-viewer_cont",style:{transform:Object(c["to"])([V.x,V.y,V.scale,V.rotateZ],(e,t,n,r)=>"translate3d(".concat(e,"px, ").concat(t,"px, 0px) scale(").concat(n,") rotateZ(").concat(r,"deg)"))}},n))}),v=g},"K+nK":function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n},"R+vx":function(e,t,n){"use strict";n.r(t);var r=n("tJVT"),a=n("q1tI"),i=n.n(a),l=n("Al6Z"),c=(n("kqV7"),n("ZMQu"),n("uVtn")),o=(n("QjBK"),n("K3qG")),s=n("SWf/"),u=n.n(s),d={width:"240px",height:"240px",fontSize:"32px",textAlign:"center"},m=()=>{var e=i.a.useState(!1),t=Object(r["a"])(e,2),n=t[0],a=t[1],s=i.a.useRef(null),m=i.a.useRef(null);return i.a.createElement("div",null,i.a.createElement("div",{ref:m,className:"tc p-32",style:{width:"100%",height:"100%",border:"1px solid #ccc",margin:"10vh auto"}},i.a.createElement(l["a"],{ref:s,bound:m,disabled:n},i.a.createElement("div",{style:d},i.a.createElement("img",{style:{width:"100%",height:"100%",objectFit:"cover"},draggable:!1,src:u.a,alt:""}))),i.a.createElement("div",null,i.a.createElement(c["a"],{onClick:()=>s.current.setScale(Object(o["l"])(0,3))},"setScale()"),i.a.createElement(c["a"],{onClick:()=>s.current.setRotate(Object(o["l"])(-360,360))},"setRotate()"),i.a.createElement(c["a"],{onClick:()=>s.current.reset()},"reset()"),i.a.createElement(c["a"],{onClick:()=>a(e=>!e)},"disabled ",n.toString()))))};t["default"]=m},"SWf/":function(e,t,n){e.exports=n.p+"static/333.ede8e69c.jpg"},ZMQu:function(e,t,n){"use strict";n("iCBh"),n("vbCR")},kqV7:function(e,t,n){"use strict";n("iCBh"),n("5fsK")},tejL:function(e,t,n){"use strict";n.r(t);var r=n("0Owb"),a=n("q1tI"),i=n.n(a),l=(n("B2uJ"),n("+su7"),n("qOys")),c=n.n(l),o=n("5Yjd"),s=n.n(o),u=i.a.memo((function(){var e=n("K+nK"),t=e(n("q1tI")),r=e(n("R+vx")),a=function(){return t["default"].createElement(r["default"],null)};return t["default"].createElement(a)}));t["default"]=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h1",{id:"viewer-\u67e5\u770b\u5668"},i.a.createElement("a",{"aria-hidden":"true",href:"#viewer-\u67e5\u770b\u5668"},i.a.createElement("span",{className:"icon icon-link"})),"Viewer \u67e5\u770b\u5668"),i.a.createElement("p",null,"\u521b\u5efa\u4e00\u4e2a\u53ef\u64cd\u4f5c\u7684\u5c55\u793a\u533a\u57df\uff0c\u652f\u6301\u901a\u8fc7 drag \u62d6\u52a8\u3001\u624b\u52bf\u65cb\u8f6c\u3001\u624b\u52bf\u6216\u9f20\u6807\u6eda\u8f6e\u7f29\u653e\u5b50\u5143\u7d20"),i.a.createElement("h2",{id:"\u793a\u4f8b"},i.a.createElement("a",{"aria-hidden":"true",href:"#\u793a\u4f8b"},i.a.createElement("span",{className:"icon icon-link"})),"\u793a\u4f8b"),i.a.createElement("p",null,"\ud83d\ude0a \u8bf7\u5728\u79fb\u52a8\u7aef\u4f53\u9a8c\u6b64\u793a\u4f8b\u7684\u5b8c\u6574",i.a.createElement("code",null,"(\u624b\u52bf\u652f\u6301)"),"\u6548\u679c")),i.a.createElement(s.a,Object(r["a"])({source:{tsx:"import React from 'react';\r\nimport { Viewer, ViewerRef } from 'm78/viewer';\r\nimport 'm78/viewer/style';\r\n\r\nimport 'm78/drawer/style';\r\n\r\nimport { Button } from 'm78/button';\r\nimport 'm78/button/style';\r\n\r\nimport { getRandRange } from '@lxjx/utils';\r\nimport img1 from '@/mock/img/333.jpg';\r\n\r\nconst boxStyle: React.CSSProperties = {\r\n  width: '240px',\r\n  height: '240px',\r\n  fontSize: '32px',\r\n  textAlign: 'center',\r\n};\r\n\r\nconst Demo = () => {\r\n  const [disable, setDisable] = React.useState(false);\r\n  const ref = React.useRef<ViewerRef>(null!);\r\n  const wrap = React.useRef<HTMLDivElement>(null!);\r\n  return (\r\n    <div>\r\n      <div\r\n        ref={wrap}\r\n        className=\"tc p-32\"\r\n        style={{ width: '100%', height: '100%', border: '1px solid #ccc', margin: '10vh auto' }}\r\n      >\r\n        <Viewer ref={ref} bound={wrap} disabled={disable}>\r\n          <div style={boxStyle}>\r\n            <img\r\n              style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n              draggable={false}\r\n              src={img1}\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n        </Viewer>\r\n\r\n        <div>\r\n          <Button onClick={() => ref.current.setScale(getRandRange(0, 3))}>setScale()</Button>\r\n          <Button onClick={() => ref.current.setRotate(getRandRange(-360, 360))}>\r\n            setRotate()\r\n          </Button>\r\n          <Button onClick={() => ref.current.reset()}>reset()</Button>\r\n          <Button onClick={() => setDisable(prev => !prev)}>disabled {disable.toString()}</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Demo;\r\n",jsx:"import React from 'react';\r\nimport { Viewer } from 'm78/viewer';\r\nimport 'm78/viewer/style';\r\nimport 'm78/drawer/style';\r\nimport { Button } from 'm78/button';\r\nimport 'm78/button/style';\r\nimport { getRandRange } from '@lxjx/utils';\r\nimport img1 from '@/mock/img/333.jpg';\r\n\r\nconst boxStyle = {\r\n  width: '240px',\r\n  height: '240px',\r\n  fontSize: '32px',\r\n  textAlign: 'center',\r\n};\r\n\r\nconst Demo = () => {\r\n  const [disable, setDisable] = React.useState(false);\r\n  const ref = React.useRef(null);\r\n  const wrap = React.useRef(null);\r\n  return (\r\n    <div>\r\n      <div\r\n        ref={wrap}\r\n        className=\"tc p-32\"\r\n        style={{\r\n          width: '100%',\r\n          height: '100%',\r\n          border: '1px solid #ccc',\r\n          margin: '10vh auto',\r\n        }}\r\n      >\r\n        <Viewer ref={ref} bound={wrap} disabled={disable}>\r\n          <div style={boxStyle}>\r\n            <img\r\n              style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                objectFit: 'cover',\r\n              }}\r\n              draggable={false}\r\n              src={img1}\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n        </Viewer>\r\n\r\n        <div>\r\n          <Button onClick={() => ref.current.setScale(getRandRange(0, 3))}>setScale()</Button>\r\n          <Button onClick={() => ref.current.setRotate(getRandRange(-360, 360))}>\r\n            setRotate()\r\n          </Button>\r\n          <Button onClick={() => ref.current.reset()}>reset()</Button>\r\n          <Button onClick={() => setDisable(prev => !prev)}>disabled {disable.toString()}</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Demo;\r\n"}},{path:"/_demos/demo-31",dependencies:{"@lxjx/utils":"1.13.0"},files:{}}),i.a.createElement(u,null)),i.a.createElement("div",{className:"markdown"},i.a.createElement("h2",{id:"api"},i.a.createElement("a",{"aria-hidden":"true",href:"#api"},i.a.createElement("span",{className:"icon icon-link"})),"API"),i.a.createElement("p",null,i.a.createElement("strong",null,i.a.createElement("code",null,"props"))),i.a.createElement(c.a,{code:"interface ViewerProps {\n  /** \u4efb\u4f55react\u53ef\u6e32\u67d3\u7684\u4e1c\u897f */\n  children: React.ReactNode;\n  /** false | \u7981\u7528\u4efb\u4f55\u624b\u52bf\u6216\u5b9e\u4f8b\u65b9\u6cd5 */\n  disabled?: boolean;\n  /** \u4f20\u5165\u4e00\u4e2adom\u5143\u7d20\u6216\u4e00\u4e2aref\u5bf9\u8c61\u7528\u4e8e\u9650\u5236\u53ef\u62d6\u52a8\u7684\u8303\u56f4, \u9ed8\u8ba4\u62d6\u52a8\u8303\u56f4\u4e3a\u5f53\u524d\u5143\u7d20\u5bbd\u9ad8\u503c * \u7f29\u653e\u6bd4 */\n  bound?: React.MutableRefObject<Element> | Element;\n  /** true | \u5355\u72ec\u5f00\u542f\u5173\u95ed\u67d0\u4e00\u7c7b\u4e8b\u4ef6 */\n  drag?: boolean;\n  pinch?: boolean;\n  wheel?: boolean;\n}\n",lang:"tsx"}),i.a.createElement("p",null,i.a.createElement("strong",null,i.a.createElement("code",null,"ref"))),i.a.createElement(c.a,{code:"interface ViewerRef {\n  /** \u8bbe\u7f6e\u65cb\u8f6c\u89d2\u5ea6 */\n  setRotate(rotate: number): void;\n  /** \u8bbe\u7f6e\u7f29\u653e\u6bd4\u4f8b */\n  setScale(scale: number): void;\n  /** \u8fd8\u539f\u6240\u6709\u72b6\u6001 */\n  reset(): void;\n  /** \u5b9e\u4f8b\u5c5e\u6027 */\n  instance: {\n    /** \u53ea\u8bfb | \u5f53\u524d\u7f29\u653e\u6bd4 */\n    scale: number;\n    /** \u53ea\u8bfb | \u5f53\u524d\u65cb\u8f6c\u89d2\u5ea6 */\n    rotateZ: number;\n    /** \u53ea\u8bfb | x\u8f74\u504f\u79fb\u8ddd\u79bb */\n    x: number;\n    /** \u53ea\u8bfb | y\u8f74\u504f\u79fb\u8ddd\u79bb */\n    y: number;\n    /** \u62d6\u52a8\u662f\u5426\u53ef\u7528 */\n    drag: boolean;\n    /** \u634f\u3001\u53cc\u6307\u5c55\u5f00\u662f\u5426\u53ef\u7528 */\n    pinch: boolean;\n    /** \u9f20\u6807\u6eda\u52a8\u662f\u5426\u53ef\u7528 */\n    wheel: boolean;\n  };\n}\n",lang:"tsx"})))}},vbCR:function(e,t,n){}}]);